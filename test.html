<!DOCTYPE html>
<html>
<head>
  <title>Esri Leaflet Map with Token Authentication</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Load Esri Leaflet CSS and JS -->
  <link rel="stylesheet" href="https://unpkg.com/esri-leaflet@3.1.0/dist/esri-leaflet.css" />
  <script src="https://unpkg.com/esri-leaflet@3.1.0/dist/esri-leaflet.js"></script>
  <!-- Load jQuery JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
  <!-- Create a div element for the map -->
  <div id="map" style="height: 500px"></div>
  <script>
// Define the URL of the feature layer
var featureLayerUrl = "https://services1.arcgis.com/pMeXRvgWClLJZr3s/ArcGIS/rest/services/tree_data_collection1/FeatureServer/0";

// Define the access token
var accessToken = "sqk-5mdrCuoOCPmCW3Z_tjwK1JaBlNNQfDab61eMnVPwVnu-Ly6DgVypZo04scCTeXs73IbPMVRYrqM4Mskl2IfgTj_TV-Qz8-7noV06Mo_OY-7_0n-lUemj13kXv-xhi13aUZz_7bz9eMNDdBXw6Q..";

// Create a new map with Esri Leaflet
var map = L.map('map').setView([37.75, -122.45], 10);

// Add a tile layer to the map
L.esri.basemapLayer('Topographic').addTo(map);

// Create a new feature layer with token authentication
var featureLayer = L.esri.featureLayer({
  url: featureLayerUrl,
  token: accessToken,
  useCors: false // Disable CORS to prevent issues with token authentication
});

// Add the feature layer to the map
featureLayer.addTo(map);

  </script>
</body>
</html>
